{"version":3,"sources":["Components/Button/Button.module.scss","Components/ImageGalleryItem/ImageGalleryItem.module.scss","Components/Modal/Modal.module.scss","Components/ImageGallery/ImageGallery.module.scss","App.module.scss","services/PixabayAPI.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Modal/Modal.js","App.js","index.js","Components/Searchbar/Searchbar.module.scss"],"names":["module","exports","api","fetchImages","searchQuery","page","API_URL","fetch","then","response","ok","json","Promise","reject","Error","Button","onFetch","useEffect","window","scrollTo","top","document","documentElement","scrollHeight","behavior","className","styles","Center","type","onClick","Loading","Loader","color","height","width","timeout","Component","Searchbar","onSubmit","useState","setSearchQuery","event","preventDefault","trim","toast","error","SearchForm","SearchForm_button","SearchForm_button_label","SearchForm_input","value","onChange","currentTarget","toLowerCase","autoComplete","autoFocus","placeholder","ImageGalleryItem","PixabayImage","map","hit","src","webformatURL","alt","user","ImageGalleryItem_image","id","url","largeImageURL","ImageGallery","modalRoot","querySelector","Modal","onClose","children","addEventListener","handleKeyDown","console","log","removeEventListener","e","code","createPortal","Overlay","target","App","setPixabayImage","setPage","setError","loading","setLoading","showModal","setShowModal","setAlt","setUrl","onLoading","useRef","fetchUpdate","current","PixabayAPI","PixabayImageHins","hits","prevPage","catch","message","finally","toggleModal","isOpenModal","attributes","nodeValue","LoadMoreButton","length","style","textAlign","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.54abdcb4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Center\":\"Button_Center__1rKsF\",\"Button\":\"Button_Button__1z4sO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1q-vI\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__Xe9rJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__39FYt\",\"Modal\":\"Modal_Modal__2_OND\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2vwQe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16Zlw\"};","// const axios = require('axios');\n\nconst API_KEY = '21951124-cbc15cb68780ddc893d0875a8';\nconst BASE_URL = 'https://pixabay.com/api';\n\nfunction fetchImages(searchQuery, page) {\n  const API_URL = `${BASE_URL}/?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(API_URL).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error(`Поиск ${searchQuery} не дал результата`));\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { useEffect } from 'react';\r\nimport styles from './Button.module.scss';\r\n\r\nfunction Button({ onFetch }) {\r\n\r\n  useEffect(() => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }, [onFetch]);\r\n\r\n  return (\r\n    <div className={styles.Center}>\r\n      <button type=\"button\" className={styles.Button} onClick={onFetch}>\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nexport default class Loading extends Component {\r\n  //other logic\r\n  render() {\r\n    return (\r\n      <>\r\n        <div>Loading...</div>\r\n        <Loader\r\n          Loader\r\n          type=\"Rings\"\r\n          color=\"#00BFFF\"\r\n          height={80}\r\n          width={80}\r\n          timeout={3000} //3 secs\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import { useState } from 'react';\nimport styles from './Searchbar.module.scss';\nimport { toast } from 'react-toastify';\n\nfunction Searchbar({ onSubmit }) {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const handleSearchQueryChange = event => {\n    setSearchQuery(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (searchQuery.trim() === '') {\n      toast.error('Введите что-то для поиска.');\n      return;\n    }\n\n    onSubmit(searchQuery);\n    setSearchQuery('');\n  };\n\n  return (\n    <header className={styles.Searchbar}>\n      <form onSubmit={handleSubmit} className={styles.SearchForm}>\n        <button type=\"submit\" className={styles.SearchForm_button}>\n          <span className={styles.SearchForm_button_label}>Search</span>\n        </button>\n\n        <input\n          className={styles.SearchForm_input}\n          type=\"text\"\n          value={searchQuery}\n          onChange={handleSearchQueryChange}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n\nexport default Searchbar;\n","import styles from './ImageGalleryItem.module.scss';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ PixabayImage }) => {\r\n  return (\r\n    <>\r\n      {PixabayImage.map(hit => (\r\n        <li className={styles.ImageGalleryItem} key={hit.id}>\r\n          <img\r\n            src={hit.webformatURL}\r\n            alt={hit.user}\r\n            className={styles.ImageGalleryItem_image}\r\n            id={hit.id}\r\n            url={hit.largeImageURL}\r\n          />\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  PixabayImage: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","// import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport styles from './ImageGallery.module.scss';\n\nfunction ImageGallery({ PixabayImage, onClick }) {\n  // const [searchQuery, setSearchQuery] = useState('');\n\n  return (\n    <>\n      <ul className={styles.ImageGallery} onClick={onClick}>\n        <ImageGalleryItem PixabayImage={PixabayImage} />\n      </ul>\n    </>\n  );\n}\n\nImageGallery.propTypes = {\n  PixabayImage: PropTypes.array.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport styles from './Modal.module.scss';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nfunction Modal({ onClose, children }) {\r\n\r\n  useEffect(() => {\r\n    \r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    console.log(\"addEventListener\")\r\n  });\r\n\r\n  useEffect(() => {    \r\n    window.removeEventListener(\"keydown\", handleKeyDown);\r\n    console.log(\"removeEventListener\")\r\n  });\r\n  \r\n  const handleKeyDown = e => {\r\n    console.log(\"handleKeyDown\", e)\r\n    if (e.code === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n  \r\n  const handleBackdropClick = event => {\r\n    // console.log(\"handleBackdropClick\", event)\r\n    if (event.currentTarget === event.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={styles.Overlay} onClick={handleBackdropClick}>\r\n      <div className={styles.Modal}>{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\n\r\nModal.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport './App.module.scss';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport PixabayAPI from './services/PixabayAPI';\r\nimport Button from './Components/Button';\r\nimport Loading from './Components/Loader';\r\nimport Searchbar from './Components/Searchbar';\r\nimport ImageGallery from './Components/ImageGallery';\r\nimport Modal from './Components/Modal';\r\n\r\nfunction App() {\r\n  const [PixabayImage, setPixabayImage] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  // const [activeId, setActiveId] = useState(null);\r\n  const [alt, setAlt] = useState('');\r\n  const [url, setUrl] = useState('');\r\n\r\n  // const onReversModal = useRef(showModal);\r\n  const onLoading = useRef(loading);\r\n\r\n  const submitForm = searchQuery => {\r\n    // console.log('searchQuery', searchQuery);\r\n    console.log('searchQuery', page);\r\n    setSearchQuery(searchQuery);\r\n    setPixabayImage([]);\r\n    setPage(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!searchQuery) {\r\n      return;\r\n    }\r\n    fetchUpdate();    \r\n  }, [searchQuery]);\r\n\r\n  const fetchUpdate = () => {\r\n    setLoading(!onLoading.current);\r\n\r\n    PixabayAPI.fetchImages(searchQuery, page)\r\n      .then(PixabayImageHins => {\r\n        setPixabayImage([...PixabayImage, ...PixabayImageHins.hits]);\r\n        setPage((prevPage) => prevPage + 1);\r\n        console.log('fetchUpdate', page);\r\n      })\r\n      .catch(error => setError(error.message))\r\n      .finally(() => {\r\n        console.log('сработал finally');\r\n        setLoading(onLoading.current);\r\n      });    \r\n  }\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(!showModal);\r\n    console.log('toggleModal', showModal);\r\n\r\n  };\r\n\r\n  const isOpenModal = event => {\r\n    // setActiveId(event.target.id);\r\n    setAlt(event.target.alt);\r\n    setUrl(event.target.attributes.url.nodeValue);\r\n\r\n    console.log('isOpenModal', showModal);\r\n    setLoading(onLoading.current);\r\n\r\n    toggleModal(false);\r\n  };\r\n\r\n  const LoadMoreButton = !(PixabayImage.length < 12) && !loading;\r\n\r\n  return (\r\n    <div>\r\n      <Searchbar onSubmit={submitForm} />\r\n      {error && <p style={{ textAlign: 'center', color: 'red' }}>{error}</p>}\r\n      {loading && <Loading />}\r\n      <ImageGallery PixabayImage={PixabayImage} onClick={isOpenModal} />\r\n      <ToastContainer autoClose={3000} />\r\n      {LoadMoreButton && <Button onFetch={fetchUpdate} />}\r\n      {showModal && (\r\n        <Modal onClose={toggleModal} onClick={isOpenModal}>\r\n          <img src={url} alt={alt} />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3Hlox\",\"SearchForm\":\"Searchbar_SearchForm__3JiHC\",\"SearchForm_button\":\"Searchbar_SearchForm_button__25Exu\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__uXBWB\",\"SearchForm_input\":\"Searchbar_SearchForm_input__PuoSD\"};"],"sourceRoot":""}